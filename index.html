<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>DETAILGUY317 Garage</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
  font-family:'Poppins',system-ui,Segoe UI,Roboto,Arial;
  color:#f3f6fb;
  background:#060b14;
  overflow:hidden;
}

/* === TRADINGVIEW TICKER BAR === */
.top-bar{
  display:flex;
  align-items:center;
  justify-content:space-between;
  background:rgba(13,17,23,0.95);
  padding:5px 10px;
  position:fixed;
  top:0;left:0;width:100%;
  z-index:9999;
  opacity:0;
  transform:translateY(-20px);
  transition:opacity 2s ease, transform 2s ease;
}
.top-bar.visible{
  opacity:1;
  transform:translateY(0);
}
.stock-list-button{
  background:#ff6600;
  color:#fff;
  border:none;
  border-radius:6px;
  padding:8px 12px;
  font-weight:600;
  cursor:pointer;
  transition:background .3s;
}
.stock-list-button:hover{
  background:#ff8533;
}
body{padding-top:60px}

/* === background & animations === */
#background{
  position:fixed;inset:0;
  background:url("./webback.jpg") center/cover no-repeat;
  filter:brightness(1.15) contrast(1.05);
  animation:scrollBg 12s ease-out forwards;
  z-index:0;
}
@keyframes scrollBg{
  from{background-position:center 200px;}
  to{background-position:center -180px;}
}

/* === header === */
.overlay{
  position:fixed;top:80px;left:50%;
  transform:translateX(-50%);
  text-align:center;z-index:3;
  perspective:800px;
}
.overlay h1{
  font-size:64px;font-weight:800;
  color:#ff6a00;letter-spacing:4px;
  text-shadow:0 0 30px rgba(255,106,0,1);
  transform:rotateX(15deg) translateZ(30px);
  animation:pulse3D 6s ease-in-out infinite;
}
.overlay p{
  margin-top:8px;font-size:24px;
  color:#ffe6cc;text-shadow:0 0 12px rgba(255,106,0,0.9);
  transform:rotateX(10deg) translateZ(10px);
  animation:pulse3DSoft 6s ease-in-out infinite;
}
@keyframes pulse3D{
  0%,100%{transform:rotateX(15deg) translateZ(30px) scale(1);}
  50%{transform:rotateX(5deg) translateZ(60px) scale(1.1);}
}
@keyframes pulse3DSoft{
  0%,100%{transform:rotateX(10deg) translateZ(10px) scale(1);}
  50%{transform:rotateX(5deg) translateZ(25px) scale(1.05);}
}

/* === icon capsules bottom === */
.icon-row{
  position:fixed;
  bottom:0;left:50%;
  transform:translateX(-50%);
  display:flex;gap:1.5rem;
  z-index:2;padding-bottom:12px;
}
.icon{
  min-width:130px;height:58px;
  background:linear-gradient(145deg,#ff6a00,#ff3b00);
  border-radius:40px;
  box-shadow:0 0 15px rgba(255,102,0,0.5);
  display:flex;align-items:center;justify-content:center;
  color:#fff;font-weight:600;letter-spacing:1px;
  cursor:pointer;transition:all .35s ease;
}
.icon:hover{
  transform:translateY(-8px) scale(1.05);
  box-shadow:0 0 25px #ff6600,0 0 40px rgba(255,102,0,0.5);
}

/* === side boxes === */
.search-bar,.vin-box{
  position:fixed;
  width:320px;
  background:rgba(20,20,20,0.95);
  color:#fff;border:1px solid #ff6600;
  border-radius:14px;padding:14px 18px;
  box-shadow:0 0 25px rgba(255,102,0,0.3);
  z-index:4;
}
.search-bar{right:40px;bottom:40px;}
.vin-box{left:40px;bottom:40px;}

.search-bar label,.vin-box label{
  font-weight:600;font-size:1.05em;color:#ff7f2a;
  margin-bottom:9px;text-align:center;display:block;
}
.search-bar input,.vin-box input{
  width:100%;padding:10px;border-radius:8px;
  background:#111;color:#fff;border:1px solid #555;
  margin-bottom:8px;outline:none;
}
.vin-box input{text-transform:uppercase;}
.search-bar button,.vin-box button{
  width:100%;padding:10px;border-radius:8px;
  border:none;background:#ff6600;color:#fff;
  cursor:pointer;font-size:1.05em;font-weight:600;
  transition:.3s;
}
.search-bar button:hover,.vin-box button:hover{
  background:#ff7f2a;
  box-shadow:0 0 20px rgba(255,102,0,0.6);
}
.faq-response,.vin-response{
  background:#222;color:#fff;padding:8px;
  border-radius:6px;font-size:.95em;
  margin-top:8px;
}
.vin-response{
  text-align:left;min-height:18px;max-height:400px;overflow-y:auto;
}
.vin-response h3{color:#ff7f2a;margin-bottom:8px;font-size:1.1em;}
.vin-response .recall-item{
  background:#1a1a1a;padding:10px;
  border-left:3px solid #ff6600;
  margin-bottom:10px;border-radius:4px;
}
.vin-response .no-recall{
  color:#4ade80;font-weight:600;text-align:center;padding:10px;
}
.vin-response .warning{color:#fbbf24;font-weight:600;}
.vin-response button{
  width:100%;padding:8px;margin-top:8px;border-radius:6px;
  border:none;background:#ff6600;color:#fff;
  cursor:pointer;font-weight:600;transition:.3s;
}
.vin-response button:hover{
  background:#ff7f2a;box-shadow:0 0 15px rgba(255,102,0,0.5);
}
.vin-response .button-row{display:flex;gap:8px;margin-top:8px;}
.vin-response .button-row button{flex:1;font-size:.9em;}
footer{margin-top:8px;font-size:.8rem;color:#aaa;text-align:right;}
</style>
</head>
<body>
<!-- === TICKER BAR BEGIN === -->
<div class="top-bar" id="tickerBar">
  <div class="tradingview-widget-container" style="flex:1;">
    <div class="tradingview-widget-container__widget"></div>
    <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-ticker-tape.js" async>
    {
      "symbols": [
        { "proName": "NASDAQ:TSLA", "title": "Tesla" },
        { "proName": "NYSE:F", "title": "Ford" },
        { "proName": "NYSE:GM", "title": "General Motors" },
        { "proName": "NASDAQ:RIVN", "title": "Rivian" },
        { "proName": "NYSE:HMC", "title": "Honda Motor" },
        { "proName": "NYSE:TM", "title": "Toyota Motor" }
      ],
      "colorTheme": "dark",
      "isTransparent": false,
      "displayMode": "adaptive",
      "locale": "en",
      "largeChartUrl": "https://your-website.com/stocks?symbol="
    }
    </script>
  </div>
  <button class="stock-list-button" onclick="window.location.href='stocks.html'">
    View Stock Lists
  </button>
</div>
<!-- === TICKER BAR END === -->

  <div id="background"></div>

  <div class="overlay">
    <h1>DETAILGUY317 Garage</h1>
    <p>Racing / Automotive News and Information</p>
  </div>

  <div class="icon-row">
    <div class="icon" id="estore">E-Store</div>
    <div class="icon" id="racing">Racing</div>
    <div class="icon" id="auto">Auto Info</div>
    <div class="icon" id="extra">TBD</div>
  </div>

  <div class="vin-box">
    <label>Enter VIN Here for FREE Recall Check</label>
    <input type="text" placeholder="Enter 17-digit VIN..." id="vinInput" maxlength="17" />
    <button onclick="handleVIN()">Check Recalls</button>
    <div class="vin-response" id="vin-response"></div>
  </div>

  <div class="search-bar">
    <label>Ask A Car Question or Enter Trouble Code </label>
    <input type="text" placeholder="Type your car question or DTC..." id="queryInput" />
    <button onclick="handleSearch()">Get Answer</button>
    <div class="faq-response" id="faq-response"></div>
    <footer>¬© 2025 DetailGuy317.com | Made in U.S.A. by carguy for carfolks </footer>
  </div>

<script>
/* === Fade in ticker after delay === */
window.addEventListener("load",()=>{
  setTimeout(()=>{document.getElementById("tickerBar").classList.add("visible");},4000);
});

/* === search + vin handling === */
function handleSearch(){
  const query=document.getElementById('queryInput').value.trim();
  const response=document.getElementById('faq-response');
  if(!query){response.textContent="Please enter a question or code!";return;}
  response.textContent="You asked: "+query+" (Demo response ‚Äî AI integration coming soon)";
}

function handleVIN(){
  const vin=document.getElementById('vinInput').value.trim().toUpperCase();
  const response=document.getElementById('vin-response');
  if(!vin){response.innerHTML="<div style='text-align:center'>Please enter a VIN!</div>";return;}
  if(vin.length!==17){response.innerHTML="<div style='text-align:center'>VIN must be exactly 17 characters!</div>";return;}
  response.innerHTML="<div style='text-align:center'>üîç Checking NHTSA database...</div>";
  fetch(`https://api.nhtsa.gov/recalls/recallsByVehicle?vin=${vin}`)
    .then(res=>res.json())
    .then(data=>{displayRecalls(vin,data);})
    .catch(()=>{response.innerHTML="<div style='text-align:center;color:#ef4444'>Error connecting to NHTSA. Please try again.</div>";});
}

function displayRecalls(vin,data){
  const response=document.getElementById('vin-response');
  const wmi=vin.substring(0,3);
  let recallUrl='',manufacturer='';
  if(wmi.startsWith('1F')||wmi.startsWith('3F')){recallUrl='https://owner.ford.com/tools/account/maintenance/recalls.html';manufacturer='Ford';}
  else if(wmi.startsWith('1G')||wmi.startsWith('3G')||wmi.startsWith('2G')){recallUrl='https://my.gm.com/recalls';manufacturer='GM';}
  else if(wmi.startsWith('1C')||wmi.startsWith('3C')||wmi.startsWith('2C')){recallUrl='https://recalls.mopar.com/';manufacturer='Chrysler/Stellantis';}
  else if(wmi.startsWith('4T')||wmi.startsWith('5T')||wmi.startsWith('JT')){recallUrl='https://www.toyota.com/recall';manufacturer='Toyota';}
  else if(wmi.startsWith('1H')||wmi.startsWith('2H')||wmi.startsWith('JH')){recallUrl='https://owners.honda.com/service-maintenance/recalls';manufacturer='Honda';}
  else if(wmi.startsWith('1N')||wmi.startsWith('3N')||wmi.startsWith('JN')){recallUrl='https://www.nissan-recalls.com/';manufacturer='Nissan';}
  else if(wmi.startsWith('KM')||wmi.startsWith('5N')){recallUrl='https://autoservice.hyundaiusa.com/campaignhome';manufacturer='Hyundai';}
  else if(wmi.startsWith('KN')){recallUrl='https://owners.kia.com/us/en/safety-recall.html';manufacturer='Kia';}
  else if(wmi.startsWith('4S')||wmi.startsWith('JF')){recallUrl='https://www.subaru.com/vehicle-recalls.html';manufacturer='Subaru';}
  else if(wmi.startsWith('JM')){recallUrl='https://www.mazdausa.com/owners/recalls';manufacturer='Mazda';}
  else if(wmi.startsWith('WV')||wmi.startsWith('3V')){recallUrl='https://www.vw.com/recalls/';manufacturer='Volkswagen';}
  else if(wmi.startsWith('WB')||wmi.startsWith('5U')){recallUrl='https://www.bmwusa.com/recall.html';manufacturer='BMW';}
  else if(wmi.startsWith('WD')||wmi.startsWith('4J')){recallUrl='https://www.mbusa.com/en/owners/recalls';manufacturer='Mercedes-Benz';}
  else{recallUrl='https://www.nhtsa.gov/recalls';manufacturer='Unknown';}

  let html='<h3>VIN: '+vin+'</h3>';
  if(manufacturer!=='Unknown'){html+='<div style="margin-bottom:10px;color:#aaa">Manufacturer: '+manufacturer+'</div>';}
  const results=data.results||[];
  if(results.length===0){
    html+='<div class="no-recall">‚úì No Open Recalls Found</div>';
    html+='<div style="margin-top:12px;font-size:.85em;color:#aaa;text-align:center">Great news! No active recalls for this vehicle.</div>';
  }else{
    html+='<div class="warning">‚ö†Ô∏è '+results.length+' Recall'+(results.length>1?'s':'')+' Found</div>';
    results.forEach(r=>{
      html+='<div class="recall-item">';
      html+='<strong>Recall #'+(r.NHTSACampaignNumber||'N/A')+'</strong><br>';
      html+='<strong>Component:</strong> '+(r.Component||'N/A')+'<br>';
      html+='<strong>Summary:</strong> '+(r.Summary||'N/A')+'<br>';
      if(r.Consequence)html+='<strong>Risk:</strong> '+r.Consequence+'<br>';
      if(r.Remedy)html+='<strong>Remedy:</strong> '+r.Remedy+'<br>';
      html+='</div>';
    });
  }
  html+='<div class="button-row">';
  html+='<button onclick="copyVIN(\''+vin+'\')">üìã Copy VIN</button>';
  if(manufacturer!=='Unknown'){html+='<button onclick="goToOEM(\''+recallUrl+'\',\''+manufacturer+'\')">View on '+manufacturer+' Site</button>';}
  html+='</div>';
  html+='<div style="margin-top:8px;font-size:.8em;color:#888;text-align:center">Note: You\'ll need to paste your VIN on the manufacturer\'s website</div>';
  response.innerHTML=html;
}

function copyVIN(vin){navigator.clipboard.writeText(vin).then(()=>{alert('VIN copied to clipboard!');}).catch(()=>{alert('VIN: '+vin);});}
function goToOEM(url){window.open(url,'_blank');}

/* icon click demos */
document.getElementById('estore').onclick=()=>alert("Opening eStore...");
document.getElementById('racing').onclick=()=>alert("Loading racing news...");
document.getElementById('auto').onclick=()=>alert("Accessing car info...");
document.getElementById('extra').onclick=()=>alert("Future feature TBD...");
</script>
</body>
</html>
