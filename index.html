<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>DETAILGUY317 Garage</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
  font-family:'Poppins',system-ui,Segoe UI,Roboto,Arial;
  color:#f3f6fb;
  background:#060b14;
  overflow:hidden;
}

/* animated background ‚Äî scrolls up to show car, then stops */
#background{
  position:fixed;inset:0;
  background:url("./webback.jpg") center/cover no-repeat;
  filter:brightness(1.15) contrast(1.05);
  animation:scrollBg 12s ease-out forwards;
  z-index:0;
}
@keyframes scrollBg{
  from{background-position:center 200px;}
  to{background-position:center -180px;}
}

/* top header animation */
.overlay{
  position:fixed;top:60px;left:50%;
  transform:translateX(-50%);
  text-align:center;z-index:3;
  perspective:800px;
}

/* Stock ticker at top */
.stock-ticker-container{
  position:fixed;
  top:0;left:0;right:0;
  height:50px;
  background:rgba(10,10,10,0.95);
  border-bottom:1px solid #ff6600;
  display:flex;
  align-items:center;
  z-index:5;
  opacity:0;
  animation:fadeInTicker 2s ease-in-out 10s forwards;
}
@keyframes fadeInTicker{
  from{opacity:0;}
  to{opacity:1;}
}
.ticker-wrapper{
  flex:1;
  overflow:hidden;
  position:relative;
}
.ticker-tape{
  display:flex;
  animation:scroll-left 60s linear infinite;
  white-space:nowrap;
}
@keyframes scroll-left{
  from{transform:translateX(0);}
  to{transform:translateX(-50%);}
}
.ticker-item{
  display:inline-flex;
  align-items:center;
  padding:0 20px;
  color:#fff;
  font-size:14px;
  font-weight:600;
}
.ticker-symbol{
  color:#ff6600;
  margin-right:8px;
}
.ticker-price{
  color:#4ade80;
  margin-right:8px;
}
.ticker-change-up{
  color:#4ade80;
}
.ticker-change-down{
  color:#ef4444;
}
.ticker-btn{
  padding:8px 16px;
  margin-right:10px;
  background:#ff6600;
  border:none;
  border-radius:6px;
  color:#fff;
  font-weight:600;
  cursor:pointer;
  white-space:nowrap;
  transition:.3s;
}
.ticker-btn:hover{
  background:#ff7f2a;
  box-shadow:0 0 15px rgba(255,102,0,0.6);
}

/* Stock list modal */
.stock-list-modal{
  position:fixed;
  top:50%;left:50%;
  transform:translate(-50%,-50%) scale(0);
  width:500px;
  max-height:600px;
  background:rgba(15,15,15,0.98);
  border:2px solid #ff6600;
  border-radius:12px;
  padding:20px;
  z-index:100;
  transition:transform .3s ease;
  overflow-y:auto;
}
.stock-list-modal.show{
  transform:translate(-50%,-50%) scale(1);
}
.stock-list-modal h2{
  color:#ff6600;
  margin-bottom:16px;
  text-align:center;
}
.stock-list-modal ul{
  list-style:none;
  color:#fff;
}
.stock-list-modal li{
  padding:8px 12px;
  margin:4px 0;
  background:rgba(255,102,0,0.1);
  border-left:3px solid #ff6600;
  border-radius:4px;
  font-size:14px;
}
.stock-list-modal .close-btn{
  width:100%;
  padding:10px;
  margin-top:16px;
  background:#ff6600;
  border:none;
  border-radius:6px;
  color:#fff;
  font-weight:600;
  cursor:pointer;
  transition:.3s;
}
.stock-list-modal .close-btn:hover{
  background:#ff7f2a;
}
.overlay h1{
  font-size:64px;font-weight:800;
  color:#ff6a00;letter-spacing:4px;
  text-shadow:0 0 30px rgba(255,106,0,1);
  transform:rotateX(15deg) translateZ(30px);
  animation:pulse3D 6s ease-in-out infinite;
}
.overlay p{
  margin-top:8px;font-size:24px;
  color:#ffe6cc;text-shadow:0 0 12px rgba(255,106,0,0.9);
  transform:rotateX(10deg) translateZ(10px);
  animation:pulse3DSoft 6s ease-in-out infinite;
}
@keyframes pulse3D{
  0%,100%{transform:rotateX(15deg) translateZ(30px) scale(1);}
  50%{transform:rotateX(5deg) translateZ(60px) scale(1.1);}
}
@keyframes pulse3DSoft{
  0%,100%{transform:rotateX(10deg) translateZ(10px) scale(1);}
  50%{transform:rotateX(5deg) translateZ(25px) scale(1.05);}
}

/* bottom sleek capsules - anchored to bottom edge */
.icon-row{
  position:fixed;
  bottom:0;left:50%;
  transform:translateX(-50%);
  display:flex;gap:1.5rem;
  z-index:2;padding-bottom:12px;
}
.icon{
  min-width:130px;height:58px;
  background:linear-gradient(145deg,#ff6a00,#ff3b00);
  border-radius:40px;
  box-shadow:0 0 15px rgba(255,102,0,0.5);
  display:flex;align-items:center;justify-content:center;
  color:#fff;font-weight:600;letter-spacing:1px;
  cursor:pointer;transition:all .35s ease;
}
.icon:hover{
  transform:translateY(-8px) scale(1.05);
  box-shadow:0 0 25px #ff6600,0 0 40px rgba(255,102,0,0.5);
}

/* dark question box bottom-right */
.search-bar{
  position:fixed;right:40px;bottom:40px;
  width:320px;
  background:rgba(20,20,20,0.95);
  color:#fff;border:1px solid #ff6600;
  border-radius:14px;padding:14px 18px;
  box-shadow:0 0 25px rgba(255,102,0,0.3);
  z-index:4;
}

/* VIN lookup box bottom-left */
.vin-box{
  position:fixed;left:40px;bottom:40px;
  width:320px;
  background:rgba(20,20,20,0.95);
  color:#fff;border:1px solid #ff6600;
  border-radius:14px;padding:14px 18px;
  box-shadow:0 0 25px rgba(255,102,0,0.3);
  z-index:4;
}

.search-bar label{
  font-weight:600;font-size:1.05em;
  color:#ff7f2a;margin-bottom:9px;
  text-align:center;display:block;
}
.vin-box label{
  font-weight:600;font-size:1.05em;
  color:#ff7f2a;margin-bottom:9px;
  text-align:center;display:block;
}

.search-bar input{
  width:100%;padding:10px;
  border-radius:8px;background:#111;color:#fff;
  border:1px solid #555;margin-bottom:8px;outline:none;
}
.vin-box input{
  width:100%;padding:10px;
  border-radius:8px;background:#111;color:#fff;
  border:1px solid #555;margin-bottom:8px;outline:none;
  text-transform:uppercase;
}

.search-bar button{
  width:100%;padding:10px;border-radius:8px;
  border:none;background:#ff6600;color:#fff;
  cursor:pointer;font-size:1.05em;font-weight:600;
  transition:.3s;
}
.search-bar button:hover{
  background:#ff7f2a;
  box-shadow:0 0 20px rgba(255,102,0,0.6);
}
.vin-box button{
  width:100%;padding:10px;border-radius:8px;
  border:none;background:#ff6600;color:#fff;
  cursor:pointer;font-size:1.05em;font-weight:600;
  transition:.3s;
}
.vin-box button:hover{
  background:#ff7f2a;
  box-shadow:0 0 20px rgba(255,102,0,0.6);
}

.faq-response{
  background:#222;color:#fff;padding:8px;
  border-radius:6px;font-size:.95em;
  text-align:center;margin-top:8px;min-height:18px;
}
.vin-response{
  background:#222;color:#fff;padding:12px;
  border-radius:6px;font-size:.95em;
  text-align:left;margin-top:8px;min-height:18px;
  max-height:400px;overflow-y:auto;
}
.vin-response h3{
  color:#ff7f2a;margin-bottom:8px;font-size:1.1em;
}
.vin-response .recall-item{
  background:#1a1a1a;padding:10px;
  border-left:3px solid #ff6600;
  margin-bottom:10px;border-radius:4px;
}
.vin-response .no-recall{
  color:#4ade80;font-weight:600;
  text-align:center;padding:10px;
}
.vin-response .warning{
  color:#fbbf24;font-weight:600;
}
.vin-response button{
  width:100%;padding:8px;margin-top:8px;
  border-radius:6px;border:none;
  background:#ff6600;color:#fff;
  cursor:pointer;font-weight:600;
  transition:.3s;
}
.vin-response button:hover{
  background:#ff7f2a;
  box-shadow:0 0 15px rgba(255,102,0,0.5);
}
.vin-response .button-row{
  display:flex;gap:8px;margin-top:8px;
}
.vin-response .button-row button{
  flex:1;font-size:.9em;
}

footer{
  margin-top:8px;font-size:.8rem;
  color:#aaa;text-align:right;
}

/* Easter egg headlight hotspots */
.headlight-left{
  position:fixed;
  width:80px;height:60px;
  border-radius:50%;
  cursor:pointer;
  z-index:1;
  transition:all .3s;
  right:53%;top:81%;
}
.headlight-right{
  position:fixed;
  width:80px;height:60px;
  border-radius:50%;
  pointer-events:none;
  z-index:1;
  transition:all .3s;
  right:76%;top:80%;
}
.headlight-flash{
  box-shadow:0 0 60px rgba(255,255,255,1),0 0 100px rgba(135,206,250,0.8);
  animation:flash .3s ease-in-out;
}
@keyframes flash{
  0%,100%{opacity:0;}
  50%{opacity:1;}
}

/* Door unlock glow */
.door-area{
  position:fixed;
  right:18%;top:52%;
  width:120px;height:180px;
  border-radius:20px;
  pointer-events:none;
  z-index:1;
  opacity:0;
}
.door-unlock{
  opacity:1;
  box-shadow:0 0 80px rgba(255,106,0,1),0 0 120px rgba(255,106,0,0.6);
  animation:doorGlow 1s ease-in-out;
}
@keyframes doorGlow{
  0%,100%{opacity:0;}
  50%{opacity:1;}
}

/* Secret box */
.secret-box{
  position:fixed;
  right:15%;top:50%;
  transform:translateY(-50%) translateX(200%);
  width:350px;
  background:rgba(10,10,10,0.98);
  border:2px solid #ff6600;
  border-radius:16px;
  padding:24px;
  box-shadow:0 0 40px rgba(255,102,0,0.6);
  z-index:10;
  transition:transform 1s ease-out;
}
.secret-box.show{
  transform:translateY(-50%) translateX(0);
}
.secret-box h2{
  color:#ff6600;
  text-align:center;
  margin-bottom:16px;
  font-size:1.4em;
}
.secret-box p{
  color:#ccc;
  text-align:center;
  margin-bottom:20px;
  line-height:1.6;
}
.secret-box button{
  width:100%;
  padding:12px;
  background:#ff6600;
  border:none;
  border-radius:8px;
  color:#fff;
  font-size:1.1em;
  font-weight:600;
  cursor:pointer;
  transition:.3s;
}
.secret-box button:hover{
  background:#ff7f2a;
  box-shadow:0 0 20px rgba(255,102,0,0.8);
}
</style>
</head>
<body>
  <div id="background"></div>

  <!-- Stock Ticker -->
  <div class="stock-ticker-container">
    <div class="ticker-wrapper">
      <div class="ticker-tape" id="tickerTape"></div>
    </div>
    <button class="ticker-btn" onclick="toggleStockList()">üìä View Stocks</button>
  </div>

  <!-- Stock List Modal -->
  <div class="stock-list-modal" id="stockListModal">
    <h2>üöó Auto Industry Stocks</h2>
    <ul>
      <li><strong>F</strong> - Ford Motor Company</li>
      <li><strong>GM</strong> - General Motors</li>
      <li><strong>TSLA</strong> - Tesla Inc</li>
      <li><strong>TM</strong> - Toyota Motor Corp</li>
      <li><strong>STLA</strong> - Stellantis (Chrysler/Dodge/Jeep/Ram)</li>
      <li><strong>HMC</strong> - Honda Motor Co</li>
      <li><strong>RACE</strong> - Ferrari N.V.</li>
      <li><strong>NSANY</strong> - Nissan Motor Co</li>
      <li><strong>HYMTF</strong> - Hyundai Motor</li>
      <li><strong>VLKAF</strong> - Volkswagen AG</li>
      <li><strong>BMWYY</strong> - BMW AG</li>
      <li><strong>MBGYY</strong> - Mercedes-Benz Group</li>
      <li><strong>POAHY</strong> - Porsche</li>
      <li><strong>FUJHY</strong> - Subaru (Fuji Heavy)</li>
      <li><strong>MZDAY</strong> - Mazda Motor</li>
      <li><strong>GT</strong> - Goodyear Tire</li>
      <li><strong>DLPH</strong> - Delphi Technologies</li>
      <li><strong>BWA</strong> - BorgWarner (Auto Parts)</li>
      <li><strong>APTV</strong> - Aptiv PLC (Auto Tech)</li>
      <li><strong>LEA</strong> - Lear Corporation (Auto Seating)</li>
      <li><strong>VC</strong> - Visteon Corp (Auto Electronics)</li>
      <li><strong>ALV</strong> - Autoliv Inc (Safety Systems)</li>
      <li><strong>RIVN</strong> - Rivian Automotive</li>
      <li><strong>LCID</strong> - Lucid Group</li>
      <li><strong>NIO</strong> - NIO Inc (Chinese EV)</li>
      <li><strong>XPEV</strong> - XPeng Inc (Chinese EV)</li>
      <li><strong>LI</strong> - Li Auto Inc (Chinese EV)</li>
    </ul>
    <button class="close-btn" onclick="toggleStockList()">Close</button>
  </div>

  <!-- Easter egg hotspots -->
  <div class="headlight-left" id="leftHeadlight"></div>
  <div class="headlight-right" id="rightHeadlight"></div>
  <div class="door-area" id="doorArea"></div>

  <!-- Secret box -->
  <div class="secret-box" id="secretBox">
    <h2>üîì Secret Garage Unlocked!</h2>
    <p>Welcome to the family vault. This is your private space for exclusive content, tutorials, and special messages.</p>
    <button onclick="enterSecret()">Enter Secret Garage</button>
  </div>

  <div class="overlay">
    <h1>DETAILGUY317 Garage</h1>
    <p>Racing / Automotive News and Information</p>
  </div>

  <div class="icon-row">
    <div class="icon" id="estore">E-Store</div>
    <div class="icon" id="racing">Racing</div>
    <div class="icon" id="auto">Auto Info</div>
    <div class="icon" id="extra">TBD</div>
  </div>

  <div class="vin-box">
    <label>Enter VIN Here for FREE Recall Check</label>
    <input type="text" placeholder="Enter 17-digit VIN..." id="vinInput" maxlength="17" />
    <button onclick="handleVIN()">Check Recalls</button>
    <div class="vin-response" id="vin-response"></div>
  </div>

  <div class="search-bar">
    <label>Ask A Car Question or Enter Trouble Code </label>
    <input type="text" placeholder="Type your car question or DTC..." id="queryInput" />
    <button onclick="handleSearch()">Get Answer</button>
    <div class="faq-response" id="faq-response"></div>
    <footer>¬© 2025 DetailGuy317.com | Made in U.S.A. by carguy for carfolks </footer>
  </div>

<script>
// Stock ticker symbols - EDIT THIS ARRAY TO CUSTOMIZE!
const stockSymbols=[
  'F','GM','TSLA','TM','STLA','HMC','RACE','NSANY','HYMTF',
  'VLKAF','BMWYY','MBGYY','POAHY','FUJHY','MZDAY','GT',
  'DLPH','BWA','APTV','LEA','VC','ALV','RIVN','LCID','NIO','XPEV','LI'
];

// Initialize ticker tape
function initTicker(){
  const tape=document.getElementById('tickerTape');
  // Create ticker items twice for seamless loop
  const tickerHTML=stockSymbols.map(symbol=>
    `<div class="ticker-item">
      <span class="ticker-symbol">${symbol}</span>
      <span class="ticker-price">$--</span>
      <span class="ticker-change-up">‚ñ≤ --%</span>
    </div>`
  ).join('');
  tape.innerHTML=tickerHTML+tickerHTML; // Duplicate for infinite scroll
  
  // Fetch real prices (optional - uses demo data if API unavailable)
  fetchStockPrices();
}

// Fetch stock prices (simplified - you can enhance this)
function fetchStockPrices(){
  // Demo data - replace with real API if you want live prices
  // For now, just shows placeholder data
  const prices={'F':11.23,'GM':36.45,'TSLA':245.67,'TM':178.90,'STLA':19.34,
    'HMC':28.56,'RACE':389.12,'NSANY':8.45,'HYMTF':45.23,'VLKAF':98.76,
    'BMWYY':87.34,'MBGYY':67.89,'POAHY':78.45,'FUJHY':7.23,'MZDAY':6.78,
    'GT':14.56,'DLPH':23.45,'BWA':34.67,'APTV':89.23,'LEA':120.45,
    'VC':67.89,'ALV':98.34,'RIVN':12.34,'LCID':3.45,'NIO':5.67,'XPEV':9.23,'LI':23.45};
  
  document.querySelectorAll('.ticker-item').forEach(item=>{
    const symbol=item.querySelector('.ticker-symbol').textContent;
    const priceEl=item.querySelector('.ticker-price');
    const changeEl=item.querySelector('[class^="ticker-change"]');
    if(prices[symbol]){
      priceEl.textContent='
let clickCount=0;
let sequenceStage=0;

// Car unlock sound (simple beep beep)
function playUnlockSound(){
  try{
    const audioCtx=new (window.AudioContext||window.webkitAudioContext)();
    // First beep
    const osc1=audioCtx.createOscillator();
    const gain1=audioCtx.createGain();
    osc1.connect(gain1);
    gain1.connect(audioCtx.destination);
    osc1.frequency.value=800;
    gain1.gain.value=0.3;
    osc1.start(audioCtx.currentTime);
    osc1.stop(audioCtx.currentTime+0.1);
    // Second beep
    const osc2=audioCtx.createOscillator();
    const gain2=audioCtx.createGain();
    osc2.connect(gain2);
    gain2.connect(audioCtx.destination);
    osc2.frequency.value=800;
    gain2.gain.value=0.3;
    osc2.start(audioCtx.currentTime+0.15);
    osc2.stop(audioCtx.currentTime+0.25);
  }catch(e){
    console.log('Audio not supported');
  }
}

// Flash headlight
function flashHeadlight(element,times){
  let count=0;
  const interval=setInterval(()=>{
    element.classList.add('headlight-flash');
    setTimeout(()=>element.classList.remove('headlight-flash'),300);
    count++;
    if(count>=times)clearInterval(interval);
  },600);
}

// Easter egg click handler
document.getElementById('leftHeadlight').addEventListener('click',()=>{
  const leftHL=document.getElementById('leftHeadlight');
  const rightHL=document.getElementById('rightHeadlight');
  const door=document.getElementById('doorArea');
  const secretBox=document.getElementById('secretBox');
  
  clickCount++;
  
  // Stage 1: Click left headlight 5 times
  if(sequenceStage===0 && clickCount===5){
    flashHeadlight(rightHL,2);
    clickCount=0;
    sequenceStage=1;
  }
  // Stage 2: Click left headlight 5 more times
  else if(sequenceStage===1 && clickCount===5){
    flashHeadlight(leftHL,2);
    setTimeout(()=>flashHeadlight(rightHL,2),100);
    setTimeout(()=>{
      playUnlockSound();
      door.classList.add('door-unlock');
      setTimeout(()=>{
        door.classList.remove('door-unlock');
        secretBox.classList.add('show');
      },1000);
    },1500);
    clickCount=0;
    sequenceStage=2;
  }
});

// Enter secret garage
function enterSecret(){
  window.location.href='secret-garage.html';
}

function handleSearch(){
  const query=document.getElementById('queryInput').value.trim();
  const response=document.getElementById('faq-response');
  if(!query){
    response.textContent="Please enter a question or code!";
    return;
  }
  response.textContent="You asked: "+query+" (Demo response ‚Äî AI integration coming soon)";
}

function handleVIN(){
  const vin=document.getElementById('vinInput').value.trim().toUpperCase();
  const response=document.getElementById('vin-response');
  
  if(!vin){
    response.innerHTML="<div style='text-align:center'>Please enter a VIN!</div>";
    return;
  }
  
  if(vin.length!==17){
    response.innerHTML="<div style='text-align:center'>VIN must be exactly 17 characters!</div>";
    return;
  }
  
  response.innerHTML="<div style='text-align:center'>üîç Checking NHTSA database...</div>";
  
  fetch(`https://api.nhtsa.gov/recalls/recallsByVehicle?vin=${vin}`)
    .then(res=>res.json())
    .then(data=>{
      displayRecalls(vin,data);
    })
    .catch(err=>{
      response.innerHTML="<div style='text-align:center;color:#ef4444'>Error connecting to NHTSA. Please try again.</div>";
    });
}

function displayRecalls(vin,data){
  const response=document.getElementById('vin-response');
  const wmi=vin.substring(0,3);
  
  let recallUrl='';
  let manufacturer='';
  
  if(wmi.startsWith('1F') || wmi.startsWith('3F')){
    recallUrl='https://owner.ford.com/tools/account/maintenance/recalls.html';
    manufacturer='Ford';
  }
  else if(wmi.startsWith('1G') || wmi.startsWith('3G') || wmi.startsWith('2G')){
    recallUrl='https://my.gm.com/recalls';
    manufacturer='GM';
  }
  else if(wmi.startsWith('1C') || wmi.startsWith('3C') || wmi.startsWith('2C')){
    recallUrl='https://recalls.mopar.com/';
    manufacturer='Chrysler/Stellantis';
  }
  else if(wmi.startsWith('4T') || wmi.startsWith('5T') || wmi.startsWith('JT')){
    recallUrl='https://www.toyota.com/recall';
    manufacturer='Toyota';
  }
  else if(wmi.startsWith('1H') || wmi.startsWith('2H') || wmi.startsWith('JH')){
    recallUrl='https://owners.honda.com/service-maintenance/recalls';
    manufacturer='Honda';
  }
  else if(wmi.startsWith('1N') || wmi.startsWith('3N') || wmi.startsWith('JN')){
    recallUrl='https://www.nissan-recalls.com/';
    manufacturer='Nissan';
  }
  else if(wmi.startsWith('KM') || wmi.startsWith('5N')){
    recallUrl='https://autoservice.hyundaiusa.com/campaignhome';
    manufacturer='Hyundai';
  }
  else if(wmi.startsWith('KN')){
    recallUrl='https://owners.kia.com/us/en/safety-recall.html';
    manufacturer='Kia';
  }
  else if(wmi.startsWith('4S') || wmi.startsWith('JF')){
    recallUrl='https://www.subaru.com/vehicle-recalls.html';
    manufacturer='Subaru';
  }
  else if(wmi.startsWith('JM')){
    recallUrl='https://www.mazdausa.com/owners/recalls';
    manufacturer='Mazda';
  }
  else if(wmi.startsWith('WV') || wmi.startsWith('3V')){
    recallUrl='https://www.vw.com/recalls/';
    manufacturer='Volkswagen';
  }
  else if(wmi.startsWith('WB') || wmi.startsWith('5U')){
    recallUrl='https://www.bmwusa.com/recall.html';
    manufacturer='BMW';
  }
  else if(wmi.startsWith('WD') || wmi.startsWith('4J')){
    recallUrl='https://www.mbusa.com/en/owners/recalls';
    manufacturer='Mercedes-Benz';
  }
  else{
    recallUrl='https://www.nhtsa.gov/recalls';
    manufacturer='Unknown';
  }
  
  let html='<h3>VIN: '+vin+'</h3>';
  
  if(manufacturer!=='Unknown'){
    html+='<div style="margin-bottom:10px;color:#aaa">Manufacturer: '+manufacturer+'</div>';
  }
  
  const results=data.results || [];
  
  if(results.length===0){
    html+='<div class="no-recall">‚úì No Open Recalls Found</div>';
    html+='<div style="margin-top:12px;font-size:.85em;color:#aaa;text-align:center">Great news! No active recalls for this vehicle.</div>';
  }else{
    html+='<div class="warning">‚ö†Ô∏è '+results.length+' Recall'+(results.length>1?'s':'')+' Found</div>';
    
    results.forEach((recall,idx)=>{
      html+='<div class="recall-item">';
      html+='<strong>Recall #'+(recall.NHTSACampaignNumber || 'N/A')+'</strong><br>';
      html+='<strong>Component:</strong> '+(recall.Component || 'N/A')+'<br>';
      html+='<strong>Summary:</strong> '+(recall.Summary || 'N/A')+'<br>';
      if(recall.Consequence){
        html+='<strong>Risk:</strong> '+recall.Consequence+'<br>';
      }
      if(recall.Remedy){
        html+='<strong>Remedy:</strong> '+recall.Remedy+'<br>';
      }
      html+='</div>';
    });
  }
  
  html+='<div class="button-row">';
  html+='<button onclick="copyVIN(\''+vin+'\')">üìã Copy VIN</button>';
  if(manufacturer!=='Unknown'){
    html+='<button onclick="goToOEM(\''+recallUrl+'\',\''+manufacturer+'\')">View on '+manufacturer+' Site</button>';
  }
  html+='</div>';
  html+='<div style="margin-top:8px;font-size:.8em;color:#888;text-align:center">Note: You\'ll need to paste your VIN on the manufacturer\'s website</div>';
  
  response.innerHTML=html;
}

function copyVIN(vin){
  navigator.clipboard.writeText(vin).then(()=>{
    alert('VIN copied to clipboard! You can now paste it on the manufacturer\'s page.');
  }).catch(()=>{
    alert('VIN: '+vin+'\n\nPlease copy this VIN manually.');
  });
}

function goToOEM(url,manufacturer){
  window.open(url,'_blank');
}

document.getElementById('estore').onclick=()=>alert("Opening eStore...");
document.getElementById('racing').onclick=()=>alert("Loading racing news...");
document.getElementById('auto').onclick=()=>alert("Accessing car info...");
document.getElementById('extra').onclick=()=>alert("Future feature TBD...");
</script>
</body>
</html>+prices[symbol].toFixed(2);
      const change=(Math.random()*4-2).toFixed(2);
      if(change>=0){
        changeEl.className='ticker-change-up';
        changeEl.textContent='‚ñ≤ '+change+'%';
      }else{
        changeEl.className='ticker-change-down';
        changeEl.textContent='‚ñº '+Math.abs(change)+'%';
      }
    }
  });
}

// Toggle stock list modal
function toggleStockList(){
  const modal=document.getElementById('stockListModal');
  modal.classList.toggle('show');
}

// Initialize on load
initTicker();

// Easter egg sequence tracker
let clickCount=0;
let sequenceStage=0;

// Car unlock sound (simple beep beep)
function playUnlockSound(){
  try{
    const audioCtx=new (window.AudioContext||window.webkitAudioContext)();
    // First beep
    const osc1=audioCtx.createOscillator();
    const gain1=audioCtx.createGain();
    osc1.connect(gain1);
    gain1.connect(audioCtx.destination);
    osc1.frequency.value=800;
    gain1.gain.value=0.3;
    osc1.start(audioCtx.currentTime);
    osc1.stop(audioCtx.currentTime+0.1);
    // Second beep
    const osc2=audioCtx.createOscillator();
    const gain2=audioCtx.createGain();
    osc2.connect(gain2);
    gain2.connect(audioCtx.destination);
    osc2.frequency.value=800;
    gain2.gain.value=0.3;
    osc2.start(audioCtx.currentTime+0.15);
    osc2.stop(audioCtx.currentTime+0.25);
  }catch(e){
    console.log('Audio not supported');
  }
}

// Flash headlight
function flashHeadlight(element,times){
  let count=0;
  const interval=setInterval(()=>{
    element.classList.add('headlight-flash');
    setTimeout(()=>element.classList.remove('headlight-flash'),300);
    count++;
    if(count>=times)clearInterval(interval);
  },600);
}

// Easter egg click handler
document.getElementById('leftHeadlight').addEventListener('click',()=>{
  const leftHL=document.getElementById('leftHeadlight');
  const rightHL=document.getElementById('rightHeadlight');
  const door=document.getElementById('doorArea');
  const secretBox=document.getElementById('secretBox');
  
  clickCount++;
  
  // Stage 1: Click left headlight 5 times
  if(sequenceStage===0 && clickCount===5){
    flashHeadlight(rightHL,2);
    clickCount=0;
    sequenceStage=1;
  }
  // Stage 2: Click left headlight 5 more times
  else if(sequenceStage===1 && clickCount===5){
    flashHeadlight(leftHL,2);
    setTimeout(()=>flashHeadlight(rightHL,2),100);
    setTimeout(()=>{
      playUnlockSound();
      door.classList.add('door-unlock');
      setTimeout(()=>{
        door.classList.remove('door-unlock');
        secretBox.classList.add('show');
      },1000);
    },1500);
    clickCount=0;
    sequenceStage=2;
  }
});

// Enter secret garage
function enterSecret(){
  window.location.href='secret-garage.html';
}

function handleSearch(){
  const query=document.getElementById('queryInput').value.trim();
  const response=document.getElementById('faq-response');
  if(!query){
    response.textContent="Please enter a question or code!";
    return;
  }
  response.textContent="You asked: "+query+" (Demo response ‚Äî AI integration coming soon)";
}

function handleVIN(){
  const vin=document.getElementById('vinInput').value.trim().toUpperCase();
  const response=document.getElementById('vin-response');
  
  if(!vin){
    response.innerHTML="<div style='text-align:center'>Please enter a VIN!</div>";
    return;
  }
  
  if(vin.length!==17){
    response.innerHTML="<div style='text-align:center'>VIN must be exactly 17 characters!</div>";
    return;
  }
  
  response.innerHTML="<div style='text-align:center'>üîç Checking NHTSA database...</div>";
  
  fetch(`https://api.nhtsa.gov/recalls/recallsByVehicle?vin=${vin}`)
    .then(res=>res.json())
    .then(data=>{
      displayRecalls(vin,data);
    })
    .catch(err=>{
      response.innerHTML="<div style='text-align:center;color:#ef4444'>Error connecting to NHTSA. Please try again.</div>";
    });
}

function displayRecalls(vin,data){
  const response=document.getElementById('vin-response');
  const wmi=vin.substring(0,3);
  
  let recallUrl='';
  let manufacturer='';
  
  if(wmi.startsWith('1F') || wmi.startsWith('3F')){
    recallUrl='https://owner.ford.com/tools/account/maintenance/recalls.html';
    manufacturer='Ford';
  }
  else if(wmi.startsWith('1G') || wmi.startsWith('3G') || wmi.startsWith('2G')){
    recallUrl='https://my.gm.com/recalls';
    manufacturer='GM';
  }
  else if(wmi.startsWith('1C') || wmi.startsWith('3C') || wmi.startsWith('2C')){
    recallUrl='https://recalls.mopar.com/';
    manufacturer='Chrysler/Stellantis';
  }
  else if(wmi.startsWith('4T') || wmi.startsWith('5T') || wmi.startsWith('JT')){
    recallUrl='https://www.toyota.com/recall';
    manufacturer='Toyota';
  }
  else if(wmi.startsWith('1H') || wmi.startsWith('2H') || wmi.startsWith('JH')){
    recallUrl='https://owners.honda.com/service-maintenance/recalls';
    manufacturer='Honda';
  }
  else if(wmi.startsWith('1N') || wmi.startsWith('3N') || wmi.startsWith('JN')){
    recallUrl='https://www.nissan-recalls.com/';
    manufacturer='Nissan';
  }
  else if(wmi.startsWith('KM') || wmi.startsWith('5N')){
    recallUrl='https://autoservice.hyundaiusa.com/campaignhome';
    manufacturer='Hyundai';
  }
  else if(wmi.startsWith('KN')){
    recallUrl='https://owners.kia.com/us/en/safety-recall.html';
    manufacturer='Kia';
  }
  else if(wmi.startsWith('4S') || wmi.startsWith('JF')){
    recallUrl='https://www.subaru.com/vehicle-recalls.html';
    manufacturer='Subaru';
  }
  else if(wmi.startsWith('JM')){
    recallUrl='https://www.mazdausa.com/owners/recalls';
    manufacturer='Mazda';
  }
  else if(wmi.startsWith('WV') || wmi.startsWith('3V')){
    recallUrl='https://www.vw.com/recalls/';
    manufacturer='Volkswagen';
  }
  else if(wmi.startsWith('WB') || wmi.startsWith('5U')){
    recallUrl='https://www.bmwusa.com/recall.html';
    manufacturer='BMW';
  }
  else if(wmi.startsWith('WD') || wmi.startsWith('4J')){
    recallUrl='https://www.mbusa.com/en/owners/recalls';
    manufacturer='Mercedes-Benz';
  }
  else{
    recallUrl='https://www.nhtsa.gov/recalls';
    manufacturer='Unknown';
  }
  
  let html='<h3>VIN: '+vin+'</h3>';
  
  if(manufacturer!=='Unknown'){
    html+='<div style="margin-bottom:10px;color:#aaa">Manufacturer: '+manufacturer+'</div>';
  }
  
  const results=data.results || [];
  
  if(results.length===0){
    html+='<div class="no-recall">‚úì No Open Recalls Found</div>';
    html+='<div style="margin-top:12px;font-size:.85em;color:#aaa;text-align:center">Great news! No active recalls for this vehicle.</div>';
  }else{
    html+='<div class="warning">‚ö†Ô∏è '+results.length+' Recall'+(results.length>1?'s':'')+' Found</div>';
    
    results.forEach((recall,idx)=>{
      html+='<div class="recall-item">';
      html+='<strong>Recall #'+(recall.NHTSACampaignNumber || 'N/A')+'</strong><br>';
      html+='<strong>Component:</strong> '+(recall.Component || 'N/A')+'<br>';
      html+='<strong>Summary:</strong> '+(recall.Summary || 'N/A')+'<br>';
      if(recall.Consequence){
        html+='<strong>Risk:</strong> '+recall.Consequence+'<br>';
      }
      if(recall.Remedy){
        html+='<strong>Remedy:</strong> '+recall.Remedy+'<br>';
      }
      html+='</div>';
    });
  }
  
  html+='<div class="button-row">';
  html+='<button onclick="copyVIN(\''+vin+'\')">üìã Copy VIN</button>';
  if(manufacturer!=='Unknown'){
    html+='<button onclick="goToOEM(\''+recallUrl+'\',\''+manufacturer+'\')">View on '+manufacturer+' Site</button>';
  }
  html+='</div>';
  html+='<div style="margin-top:8px;font-size:.8em;color:#888;text-align:center">Note: You\'ll need to paste your VIN on the manufacturer\'s website</div>';
  
  response.innerHTML=html;
}

function copyVIN(vin){
  navigator.clipboard.writeText(vin).then(()=>{
    alert('VIN copied to clipboard! You can now paste it on the manufacturer\'s page.');
  }).catch(()=>{
    alert('VIN: '+vin+'\n\nPlease copy this VIN manually.');
  });
}

function goToOEM(url,manufacturer){
  window.open(url,'_blank');
}

document.getElementById('estore').onclick=()=>alert("Opening eStore...");
document.getElementById('racing').onclick=()=>alert("Loading racing news...");
document.getElementById('auto').onclick=()=>alert("Accessing car info...");
document.getElementById('extra').onclick=()=>alert("Future feature TBD...");
</script>
</body>
</html>
